= form_with(model: snack, data: { turbo_frame: "modal" }, class: "needs-validation") do |form|
  - if snack.errors.any?
    .alert.alert-danger
      %h4.mb-2= "#{pluralize(snack.errors.count, 'error')} prohibited this snack from being saved:"
      %ul.mb-0
        - snack.errors.each do |error|
          %li= error.full_message

  .mb-3
    = form.label :name, class: "form-label"
    = form.text_field :name, class: "form-control", placeholder: "Enter snack name"

  .mb-3
    = form.label :description, class: "form-label"
    = form.text_area :description, class: "form-control", rows: 4, placeholder: "Describe this snack"

  .mb-3
    = form.label :img_url, class: "form-label"
    = form.text_field :img_url, class: "form-control", placeholder: "https://example.com/image.jpg"

    .mb-3
    = form.label :flavor_ids, "Flavors", class: "form-label"
    = form.collection_select :flavor_ids, Flavor.all, :id, :name,
        { include_hidden: false, selected: snack.flavor_ids },
        { multiple: true, class: "form-select", id: "flavor-select" }

  .d-flex.justify-content-end
    = form.submit "Save Snack", class: "btn btn-primary"


:javascript
  document.addEventListener("turbo:frame-load", function() {
    console.log("LOADED")
    new SlimSelect({
      select: '#flavor-select',
      settings: {
        placeholderText: 'Select one or more flavors'
      }
    })
  })
